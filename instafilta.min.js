/*!
 * instaFilta2 - version: 2.0.2
 * jQuery plugin for performing fast customized in-page filtering
 * Documentation: https://github.com/chromawoods/instaFilta
 * Author: Andreas Weber <andreas@chromawoods.com> (http://chromawoods.com)
 */
!function(t){if("function"!=typeof t)return void console.log("instaFilta needs jQuery to work!");var e={checkables:"[type=radio], [type=checkbox]"};t.fn.instaFilta=function(a){var n=this,i=null,s={sections:[],targets:[],initiators:[]},r=t.extend({enableLogging:!1,triggers:".instafilta-trigger",targets:".instafilta-target",targetParentClass:null,sections:".instafilta-section",targetMatchClass:"instafilta-match",targetUnMatchClass:"instafilta-unmatch",sectionMatchClass:"instafilta-match",sectionUnMatchClass:"instafilta-unmatch",matchingTextClass:"instafilta-matching-text",categoryDataAttr:"instafilta-category",categoryGroupDataAttr:"data-instafilta-category-group",useSynonyms:!0,filterOnLoad:!0,triggerDelay:0,beginsWith:!1,synonyms:[{src:"à,á,å,ä,â,ã",dst:"a"},{src:"À,Á,Å,Ä,Â,Ã",dst:"A"},{src:"è,é,ë,ê",dst:"e"},{src:"È,É,Ë,Ê",dst:"E"},{src:"ì,í,ï,î",dst:"i"},{src:"Ì,Í,Ï,Î",dst:"I"},{src:"ò,ó,ö,ô,õ",dst:"o"},{src:"Ò,Ó,Ö,Ô,Õ",dst:"O"},{src:"ù,ú,ü,û",dst:"u"},{src:"Ù,Ú,Ü,Û",dst:"U"},{src:"ç",dst:"c"},{src:"Ç",dst:"C"},{src:"æ",dst:"ae"}],jQueryHideShow:!0,caseSensitive:!1,markMatches:!1,onFilterComplete:null,hideEmptySections:!0,combineInitiators:!0,initiatorBehaviors:[{selector:"[type=text]",events:"keyup",type:"term"},{selector:e.checkables,events:"change",type:"category",groupBy:"name",noneMatchesAll:!0}]},a),c=function(t,e,a){r.enableLogging&&(a=a||"log",console&&console[a]&&console[a]("instaFilta: "+t,e))},o=function(e){return r.caseSensitive===!1&&(e=e.toLowerCase()),r.useSynonyms&&t.each(r.synonyms,function(a,n){t.each(n.src,function(t,a){e=e.replace(a,n.dst)})}),e},l=function(e){e.each(function(){var e=t(this),a=[],n=e.data(r.categoryDataAttr);r.targetParentClass&&(a=e.closest("."+r.targetParentClass)),s.targets.push({$el:e,$container:a.length?a:e,isMatching:!1,matchClass:r.targetMatchClass,unMatchClass:r.targetUnMatchClass,categories:n?n.split(","):[],rawText:o(e.text()),originalHtml:e.html()})}),c("Prepared "+e.length+" tagret(s)")},h=function(e){e.each(function(){s.sections.push({$el:t(this),isMatching:!1,matchClass:r.sectionMatchClass,unMatchClass:r.sectionUnMatchClass})}),c("Prepared "+e.length+" sections")},g=function(t){var e=null;t.isMatching?(t.matchingTerm&&r.markMatches?(e=t.$el.text().substring(t.matchStartIndex,t.matchStartIndex+t.matchingTerm.length),t.$el.html(t.$el.text().replace(e,'<span class="'+r.matchingTextClass+'">'+e+"</span>"))):r.markMatches&&t.$el&&t.$el.html(t.originalHtml),t.$container.removeClass(t.unMatchClass).addClass(t.matchClass),r.jQueryHideShow&&t.$container.show()):(t.$container.addClass(t.unMatchClass).removeClass(t.matchClass),r.jQueryHideShow&&t.$container.hide(),t.$el&&t.$el.html(t.originalHtml))},u=function(t){var e=null;t.isMatching?(t.$el.removeClass(t.unMatchClass).addClass(t.matchClass),e="show"):(t.$el.removeClass(t.matchClass).addClass(t.unMatchClass),e="hide"),r.hideEmptySections&&r.jQueryHideShow&&t.$el[e]()},f=function(e,a){var n=function(){var t=a.term?o(a.term):"",n=e.rawText.indexOf(t);return r.beginsWith&&0!==n&&(n=-1),""===t||n>=0?(e.matchingTerm=t,e.matchStartIndex=n,c("Target matches",e),!0):!1},i=function(){var n=!1;return a.active&&e.categories&&t.each(a.triggers,function(a,i){i.active&&(i.categories===!1?n=!0:t.each(i.categories,function(a,i){t.each(e.categories,function(t,e){i===e&&(n=!0)})}))}),n};return"category"===a.behavior.type&&a.active?i():"string"==typeof a.term?n():!0},m=function(){t.each(s.targets,function(t,e){e.isMatching=!0,g(e)}),t.each(s.sections,function(t,e){e.isMatching=!0,u(e)})},d=function(){var e=0;r.hideEmptySections&&(t.each(s.sections,function(t,a){a.$el.find("."+r.targetMatchClass).length>0?(e++,a.isMatching=!0):a.isMatching=!1,u(a)}),c("Matching sections",e))},y=function(){var e=0,a=0;t.each(s.targets,function(n,i){e=0,i.isMatching=!1,t.each(s.initiators,function(t,a){f(i,a)&&e++}),e===s.initiators.length&&(a++,i.isMatching=!0),g(i)}),c("Matching targets",a),d(),"function"==typeof r.onFilterComplete&&r.onFilterComplete.apply(this,[function(e){var a=[];return t.each(e,function(t,e){e.isMatching&&a.push(e)}),a}(s.targets)])},v=function(a,n){if(!a.length)return!1;var o=function(s){var o=[],l=function(i){var l=null,h=i.data(r.categoryDataAttr)?i.data(r.categoryDataAttr).split(","):!1,g={$el:i.data("if-initiator",!0),categories:h,active:!1};g.$el.on(n.events,function(){var i=(t(this),0);c("Initiator triggered",n),clearTimeout(l),"term"===n.type&&(s.term=a.val()),t.each(s.triggers,function(t,a){a.$el.is(e.checkables)&&a.$el.is(":checked")?(a.active=!0,i++):a.active=!1}),0===i&&s.behavior.noneMatchesAll?s.active=!1:s.active=!0,l=setTimeout(y,r.triggerDelay)}),o.push(g)};switch(n.groupBy){case"name":i.filter("[name="+a.attr("name")+"]").each(function(){l(t(this))});break;default:l(a)}return o},l={behavior:n,active:!1};"number"!=typeof l.behavior.triggerDelay&&(l.behavior.triggerDelay=r.triggerDelay),l.triggers=o(l),s.initiators.push(l),c("Done adding initiator",l)},p=function(){return i=n.find(r.triggers),r.useSynonyms&&t.each(r.synonyms,function(t,e){e.src=e.src.split(",")}),i.each(function(){for(var e=t(this),a=null,n=0;n<r.initiatorBehaviors.length;n++)if(a=r.initiatorBehaviors[n],e.is(a.selector)&&!e.data("if-initiator")){v(e,a);break}}),l(n.find(r.targets)),h(n.find(r.sections)),r.filterOnLoad&&y(),{reset:m,addTrigger:v,getTargets:function(){return s.targets},getInitiators:function(){return s.initiators}}};return n.length?p():void c("Nothing to setup: No container to work on.")}}(jQuery);